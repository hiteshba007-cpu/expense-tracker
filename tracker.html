<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expense Tracker - Tracker</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <aside class="sidebar">
    <div class="profile">
      <img src="https://i.ibb.co/ZYdkVZJ/user.png" alt="Profile">
      <h3>Hitesh</h3>
      <p>Finance Enthusiast</p>
    </div>

    <nav class="menu">
      <a href="index.html"><i class="fa fa-home"></i> Home</a>
      <a href="tracker.html" class="active"><i class="fa fa-pen"></i> Tracker</a>
      <a href="reports.html"><i class="fa fa-chart-pie"></i> Reports</a>
    </nav>

    <div class="sidebar-footer">
      <a href="#"><i class="fa fa-cog"></i> Settings</a>
      <a href="#"><i class="fa fa-sign-out-alt"></i> Logout</a>
    </div>
  </aside>

  <main class="content">
    <section class="card">
      <h3>Add Transaction</h3>
      <form id="add-form">
        <label>Type:
          <select id="type">
            <option value="expense">Expense</option>
            <option value="income">Income</option>
          </select>
        </label>
        <label>Category: <input id="category" value="Food"></label>
        <label>Amount: <input id="amount" type="number" step="0.01"></label>
        <label>Date: <input id="date" type="date"></label>
        <label>Note: <input id="note"></label>
        <button type="submit"><i class="fa fa-plus"></i> Add</button>
      </form>
    </section>

    <section class="card">
      <h3>Transactions</h3>
      <ul id="tx-list"></ul>
    </section>
  </main>

  <script>
    const txList = document.getElementById("tx-list");
    document.getElementById("date").value = new Date().toISOString().slice(0,10);

    function loadTx() { return JSON.parse(localStorage.getItem("transactions") || "[]"); }
    function saveTx(txs) { localStorage.setItem("transactions", JSON.stringify(txs)); }

    function renderTx(txs) {
      txList.innerHTML = "";
      txs.forEach((t, i) => {
        const li = document.createElement("li");
        li.innerHTML = `<span>${t.date} - <b>${t.category}</b> (${t.type})</span>
                        <span>${t.amount.toFixed(2)} 
                        <button class="delete-btn" onclick="deleteTx(${i})">x</button></span>`;
        txList.appendChild(li);
      });
    }

    function refresh() { renderTx(loadTx()); }

    document.getElementById("add-form").onsubmit = e => {
      e.preventDefault();
      const txs = loadTx();
      const tx = {
        type: document.getElementById("type").value,
        category: document.getElementById("category").value,
        amount: parseFloat(document.getElementById("amount").value),
        date: document.getElementById("date").value,
        note: document.getElementById("note").value
      };
      if (!tx.amount) return alert("Enter amount");
      txs.push(tx);
      saveTx(txs);
      e.target.reset();
      document.getElementById("date").value = new Date().toISOString().slice(0,10);
      refresh();
    };

    function deleteTx(i) {
      const txs = loadTx();
      txs.splice(i,1);
      saveTx(txs);
      refresh();
    }

    refresh();
  </script>
</body>
</html>